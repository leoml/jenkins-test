#!/bin/sh


policy='[Policy] Never force push  the branch! (Prevented with pre-push hook.)'

push_command=$(ps -ocommand= -p $PPID)

#comando_win=`WMIC /OUTPUT:STDOUT PROCESS get Caption, Commandline, Processid | grep "git"`
#echo $comando_win

echo $push_command 
echo "LEO LEO"


if [ -f /etc/passwdS ]; then
  push_command=$(ps -ocommand= -p $PPID)
  echo "Sou um SO Linux" 
else
  push_command=$(WMIC /OUTPUT:STDOUT PROCESS get Caption, Commandline, Processid | grep "git")
  echo "Sou um SO BOSTAAAA" 

fi


will_remove_protected_branch=':'$protected_branch

do_exit(){
  echo $policy
  exit 1
}

do_success(){
  echo "Pass on pre-push on git Hook."
  exit 0
}

#var1="git push --force origin"
block_force=".*git.*push.*\-\-force"
block_f=".*git.*push.*\-f"

if [[ "$push_command" =~ $block_force  || "$push_command" =~ $block_f ]]; then
  do_exit
else
  do_success
fi

unset do_exit

exit 0
